import{t as x,a as y}from"../chunks/disclose-version.5EmpPeWP.js";import{b as ye,j as Te,a1 as me,a as ge,as as G,at as xe,a8 as Re,s as re,au as K,h as w,av as te,aw as k,u as _e,ax as Ie,a6 as be,ay as Se,d as Ee,r as ne,Y as Pe,v as Ue,az as he,y as B,Q as qe,P as De,w as Me,H as ke,x as ae,z as Y,c as P,a3 as Le,aA as Oe,$ as Qe,ab as Fe,g as oe,aB as He,aC as Ve,aD as Be,N as U,M as T,L,l as h,O as C,p as q,J as O,e as D,aE as Ye,aq as ze,m as le,F as Ge}from"../chunks/runtime.BYFGBjqA.js";import{a as pe,s as Ke,b as Je}from"../chunks/store.CN9ZQbc4.js";import{p as Xe}from"../chunks/stores.BpqSoUK3.js";import{i as Ne,p as z}from"../chunks/if.DyOQLAmA.js";let ue=!1;function je(){ue||(ue=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Ce(t,e){return e}function We(t,e,r,n){for(var a=[],o=e.length,l=0;l<o;l++)Ie(e[l].e,a,!0);var u=o>0&&a.length===0&&r!==null;if(u){var f=r.parentNode;be(f),f.append(r),n.clear(),b(t,e[0].prev,e[o-1].next)}Se(a,()=>{for(var g=0;g<o;g++){var m=e[g];u||(n.delete(m.k),b(t,m.prev,m.next)),Ee(m.e,!u)}})}function J(t,e,r,n,a,o=null){var l=t,u={items:new Map,first:null},f=(e&he)!==0;if(f){var g=t;l=w?B(qe(g)):g.appendChild(De())}w&&Me();var m=null,S=!1;ye(()=>{var i=r(),d=Te(i)?i:i==null?[]:me(i),v=d.length;if(S&&v===0)return;S=v===0;let R=!1;if(w){var p=l.data===ke;p!==(v===0)&&(l=ae(),B(l),Y(!1),R=!0)}if(w){for(var N=null,A,_=0;_<v;_++){if(P.nodeType===8&&P.data===Le){l=P,R=!0,Y(!1);break}var s=d[_],c=n(s,_);A=Ae(P,u,N,null,s,c,_,a,e),u.items.set(c,A),N=A}v>0&&B(ae())}if(!w){var F=Pe;Ze(d,u,l,a,e,(F.f&k)!==0,n)}o!==null&&(v===0?m?_e(m):m=ge(()=>o(l)):m!==null&&Ue(m,()=>{m=null})),R&&Y(!0),r()}),w&&(l=P)}function Ze(t,e,r,n,a,o,l){var j,W,Z,$;var u=(a&Oe)!==0,f=(a&(G|K))!==0,g=t.length,m=e.items,S=e.first,i=S,d,v=null,R,p=[],N=[],A,_,s,c;if(u)for(c=0;c<g;c+=1)A=t[c],_=l(A,c),s=m.get(_),s!==void 0&&((j=s.a)==null||j.measure(),(R??(R=new Set)).add(s));for(c=0;c<g;c+=1){if(A=t[c],_=l(A,c),s=m.get(_),s===void 0){var F=i?i.e.nodes_start:r;v=Ae(F,e,v,v===null?e.first:v.next,A,_,c,n,a),m.set(_,v),p=[],N=[],i=v.next;continue}if(f&&$e(s,A,c,a),s.e.f&k&&(_e(s.e),u&&((W=s.a)==null||W.unfix(),(R??(R=new Set)).delete(s))),s!==i){if(d!==void 0&&d.has(s)){if(p.length<N.length){var M=N[0],I;v=M.prev;var X=p[0],H=p[p.length-1];for(I=0;I<p.length;I+=1)ie(p[I],M,r);for(I=0;I<N.length;I+=1)d.delete(N[I]);b(e,X.prev,H.next),b(e,v,X),b(e,H,M),i=M,v=H,c-=1,p=[],N=[]}else d.delete(s),ie(s,i,r),b(e,s.prev,s.next),b(e,s,v===null?e.first:v.next),b(e,v,s),v=s;continue}for(p=[],N=[];i!==null&&i.k!==_;)(o||!(i.e.f&k))&&(d??(d=new Set)).add(i),N.push(i),i=i.next;if(i===null)continue;s=i}p.push(s),v=s,i=s.next}if(i!==null||d!==void 0){for(var E=d===void 0?[]:me(d);i!==null;)(o||!(i.e.f&k))&&E.push(i),i=i.next;var V=E.length;if(V>0){var we=a&he&&g===0?r:null;if(u){for(c=0;c<V;c+=1)(Z=E[c].a)==null||Z.measure();for(c=0;c<V;c+=1)($=E[c].a)==null||$.fix()}We(e,E,we,m)}}u&&Fe(()=>{var ee;if(R!==void 0)for(s of R)(ee=s.a)==null||ee.apply()}),ne.first=e.first&&e.first.e,ne.last=v&&v.e}function $e(t,e,r,n){n&G&&te(t.v,e),n&K?te(t.i,r):t.i=r}function Ae(t,e,r,n,a,o,l,u,f){var g=(f&G)!==0,m=(f&xe)===0,S=g?m?Re(a):re(a):a,i=f&K?re(l):l,d={i,v:S,k:o,a:null,e:null,prev:r,next:n};try{return d.e=ge(()=>u(t,S,i),w),d.e.prev=r&&r.e,d.e.next=n&&n.e,r===null?e.first=d:(r.next=d,r.e.next=d.e),n!==null&&(n.prev=d,n.e.prev=d.e),d}finally{}}function ie(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,a=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==n;){var l=Qe(o);a.before(o),o=l}}function b(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function er(t){if(w){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var n=t.value;Q(t,"value",null),t.value=n}if(t.hasAttribute("checked")){var a=t.checked;Q(t,"checked",null),t.checked=a}}};t.__on_r=r,Ve(r),je()}}function rr(t,e){var r=t.__attributes??(t.__attributes={});r.value===(r.value=e)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e)}function Q(t,e,r,n){var a=t.__attributes??(t.__attributes={});w&&(a[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||a[e]!==(a[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Be]=r),r==null?t.removeAttribute(e):typeof r!="string"&&tr(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var se=new Map;function tr(t){var e=se.get(t.nodeName);if(e)return e;se.set(t.nodeName,e=[]);for(var r,n=oe(t),a=Element.prototype;a!==n;){r=He(n);for(var o in r)r[o].set&&e.push(o);n=oe(n)}return e}function nr(t,e,r,n){var a=t.__styles??(t.__styles={});a[e]!==r&&(a[e]=r,r==null?t.style.removeProperty(e):t.style.setProperty(e,r,""))}var ar=x("<option disabled selected></option>"),or=x("<option> </option>"),lr=x("<label>Algorithm: <select><!><!></select></label>");function ur(t,e){var r=lr(),n=U(T(r)),a=T(n);Ne(a,()=>e.currentAlgorithmId===null,l=>{var u=ar();u.value=((u.__value="")==null,""),y(l,u)});var o=U(a);J(o,17,()=>Object.values(e.supportedAlgorithms),l=>l.id,(l,u)=>{var f=or(),g={},m=T(f,!0);C(f),L(()=>{g!==(g=h(u).id)&&(f.value=(f.__value=h(u).id)==null?"":h(u).id),f.selected=e.currentAlgorithmId===h(u).id,pe(m,h(u).name)}),y(l,f)}),C(n),C(r),L(()=>Q(n,"name",e.parameterName)),y(t,r)}var ir=x('<label>Color count: <input type="number" min="1"></label>');function sr(t,e){var r=ir(),n=U(T(r));er(n),C(r),L(()=>{Q(n,"name",e.parameterName),rr(n,e.currentColorCount??1)}),y(t,r)}var cr=x('<form><div><!> <!></div> <button type="submit">Apply</button></form>');function fr(t,e){q(e,!0);var r=cr(),n=T(r),a=T(n),o=O(()=>{var f,g;return((g=(f=e.currentQuery)==null?void 0:f.algorithm)==null?void 0:g.id)??null});ur(a,{get currentAlgorithmId(){return h(o)},get supportedAlgorithms(){return e.supportedAlgorithms},get parameterName(){return e.algorithmIdUrlSearchParameterName}});var l=U(a,2),u=O(()=>{var f;return((f=e.currentQuery)==null?void 0:f.colorCount)??null});sr(l,{get currentColorCount(){return h(u)},get parameterName(){return e.colorCountUrlSearchParameterName}}),C(n),Ye(2),C(r),y(t,r),D()}function vr(t,e){return`hsl(${Number(t%BigInt(e))*(360/e)}, 100%, 50%)`}var dr=x('<span class="cell svelte-mbkv3v"> </span>');function mr(t,e){q(e,!0);const r=O(()=>vr(e.cell,e.colorCount));var n=dr(),a=T(n,!0);C(n),L(()=>{nr(n,"background-color",h(r)),pe(a,e.cell)}),y(t,n),D()}var gr=x('<div class="row svelte-cocuj2"></div>');function _r(t,e){var r=gr();J(r,21,()=>e.row,Ce,(n,a)=>{mr(n,{get cell(){return h(a)},get colorCount(){return e.colorCount}})}),C(r),y(t,r)}function hr(t,e){const r=e(t);return[...t,r]}function pr(t){let e=ze(z([])),r=t;function n(){le(e,z(hr(h(e),r)))}function a(){return setInterval(n,1e3)}let o=a();function l(u){r=u,le(e,z([])),clearInterval(o),o=a()}return{changeComputeNextTriangleRow:l,get triangle(){return h(e)}}}var Nr=x('<div class="triangle-displayer svelte-17nlpx9"><div class="triangle-displayer__content svelte-17nlpx9"></div></div>');function Cr(t,e){q(e,!0);const r=pr(e.computeNextTriangleRow);let n=e.computeNextTriangleRow;Ge(()=>{n!==e.computeNextTriangleRow&&(r.changeComputeNextTriangleRow(e.computeNextTriangleRow),n=e.computeNextTriangleRow)});var a=Nr(),o=T(a);J(o,21,()=>r.triangle,Ce,(l,u)=>{_r(l,{get row(){return h(u)},get colorCount(){return e.colorCount}})}),C(o),C(a),y(t,a),D()}var Ar=x("<main><!> <!></main>");function wr(t,e){q(e,!0);var r=Ar(),n=T(r);fr(n,{get currentQuery(){return e.query},get supportedAlgorithms(){return e.supportedAlgorithms},get colorCountUrlSearchParameterName(){return e.colorCountUrlSearchParameterName},get algorithmIdUrlSearchParameterName(){return e.algorithmIdUrlSearchParameterName}});var a=U(n,2);Ne(a,()=>e.query!==null&&e.query.algorithm!==null&&e.query.colorCount!==null,o=>{Cr(o,{get computeNextTriangleRow(){return e.query.algorithm.computeNextTriangleRow},get colorCount(){return e.query.colorCount}})}),C(r),y(t,r),D()}function yr(t,e){const r=t.getAll(e);if(r.length>1)return null;const[n]=r;if(typeof n>"u")return null;const a=Number(n);return Number.isNaN(a)?null:a}function Tr(t,e){const r=t.getAll(e);if(r.length>1)return null;const[n]=r;return typeof n>"u"?null:n}function xr(t,e,r){const n=Tr(t,r);return n===null?null:e[n]??null}function Rr(t,e,r,n){const a=xr(t,n,e),o=yr(t,r);return{algorithm:a,colorCount:o}}function Ir(t){var n;const e=[],r=t.length+1;if(r===1)e.push(1n);else for(let a=1;a<=r;a+=1){const o=t[r-1-1][a-1-1]??0n,l=((n=t[r-a-1])==null?void 0:n[a-1])??0n;e.push(o+l)}return e}const ce={computeNextTriangleRow:Ir,id:"partition-count",name:"Partition count"};function br(t){const e=[];if(t.length===0)e.push(1n);else for(let r=0;r<=t[t.length-1].length;r+=1){const n=t[t.length-1][r-1]??0n,a=t[t.length-1][r]??0n;e.push(n+a)}return e}const fe={computeNextTriangleRow:br,id:"pascal",name:"Pascal's"};function Sr(t,e){if(e===0n||e===t)return 1n;let r=1n;for(let n=1n;n<=e;n+=1n)r*=t-n+1n;for(let n=1n;n<=e;n+=1n)r/=n;return r}function Er(t){const e=[],r=BigInt(t.length)+1n;for(let n=1n;n<=r;n+=1n){let a=0n;for(let o=0n;o<=n;o+=1n)a+=(-1n)**o*Sr(n,o)*(n-o)**r;e.push(a)}return e}const ve={computeNextTriangleRow:Er,id:"surjection-count",name:"Surjection count"},de={[ce.id]:ce,[fe.id]:fe,[ve.id]:ve};function kr(t,e){q(e,!0);const r=Ke(),n=()=>Je(Xe,"$page",r),a="algorithm",o="color-count";function l(){return Rr(n().url.searchParams,a,o,de)}const u=O(l);wr(t,{get query(){return h(u)},colorCountUrlSearchParameterName:o,algorithmIdUrlSearchParameterName:a,supportedAlgorithms:de}),D()}export{kr as component};

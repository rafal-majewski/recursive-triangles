import{t as w,a as x}from"../chunks/disclose-version.gPFD8Ba8.js";import{b as Ae,j as xe,a1 as de,a as me,ar as G,as as Te,a8 as we,s as re,at as J,h as A,au as te,av as M,u as ge,aw as Ie,a6 as Re,ax as be,d as Se,r as ae,Y as Ee,v as Pe,ay as _e,y as B,Q as Ue,P as De,w as qe,H as Le,x as ne,z as Y,c as P,a3 as Me,az as Oe,$ as Qe,ab as ke,g as le,aA as Fe,aB as He,aC as Ve,N as U,M as T,L as O,l as h,O as C,p as D,J as Q,e as q,aD as Be,ap as Ye,m as oe,F as ze}from"../chunks/runtime.PpVUs9l6.js";import{a as he,s as Ge,b as Je}from"../chunks/store.BIpUktQj.js";import{p as Ke}from"../chunks/stores.DecL6XR8.js";import{i as pe,p as z}from"../chunks/if.A4QjoaoA.js";let ue=!1;function Xe(){ue||(ue=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Ne(t,e){return e}function We(t,e,r,a){for(var n=[],l=e.length,o=0;o<l;o++)Ie(e[o].e,n,!0);var u=l>0&&n.length===0&&r!==null;if(u){var f=r.parentNode;Re(f),f.append(r),a.clear(),b(t,e[0].prev,e[l-1].next)}be(n,()=>{for(var g=0;g<l;g++){var m=e[g];u||(a.delete(m.k),b(t,m.prev,m.next)),Se(m.e,!u)}})}function K(t,e,r,a,n,l=null){var o=t,u={items:new Map,first:null},f=(e&_e)!==0;if(f){var g=t;o=A?B(Ue(g)):g.appendChild(De())}A&&qe();var m=null,S=!1;Ae(()=>{var i=r(),d=xe(i)?i:i==null?[]:de(i),v=d.length;if(S&&v===0)return;S=v===0;let I=!1;if(A){var p=o.data===Le;p!==(v===0)&&(o=ne(),B(o),Y(!1),I=!0)}if(A){for(var N=null,y,_=0;_<v;_++){if(P.nodeType===8&&P.data===Me){o=P,I=!0,Y(!1);break}var s=d[_],c=a(s,_);y=Ce(P,u,N,null,s,c,_,n,e),u.items.set(c,y),N=y}v>0&&B(ne())}if(!A){var F=Ee;Ze(d,u,o,n,e,(F.f&M)!==0,a)}l!==null&&(v===0?m?ge(m):m=me(()=>l(o)):m!==null&&Pe(m,()=>{m=null})),I&&Y(!0),r()}),A&&(o=P)}function Ze(t,e,r,a,n,l,o){var W,Z,j,$;var u=(n&Oe)!==0,f=(n&(G|J))!==0,g=t.length,m=e.items,S=e.first,i=S,d,v=null,I,p=[],N=[],y,_,s,c;if(u)for(c=0;c<g;c+=1)y=t[c],_=o(y,c),s=m.get(_),s!==void 0&&((W=s.a)==null||W.measure(),(I??(I=new Set)).add(s));for(c=0;c<g;c+=1){if(y=t[c],_=o(y,c),s=m.get(_),s===void 0){var F=i?i.e.nodes_start:r;v=Ce(F,e,v,v===null?e.first:v.next,y,_,c,a,n),m.set(_,v),p=[],N=[],i=v.next;continue}if(f&&je(s,y,c,n),s.e.f&M&&(ge(s.e),u&&((Z=s.a)==null||Z.unfix(),(I??(I=new Set)).delete(s))),s!==i){if(d!==void 0&&d.has(s)){if(p.length<N.length){var L=N[0],R;v=L.prev;var X=p[0],H=p[p.length-1];for(R=0;R<p.length;R+=1)ie(p[R],L,r);for(R=0;R<N.length;R+=1)d.delete(N[R]);b(e,X.prev,H.next),b(e,v,X),b(e,H,L),i=L,v=H,c-=1,p=[],N=[]}else d.delete(s),ie(s,i,r),b(e,s.prev,s.next),b(e,s,v===null?e.first:v.next),b(e,v,s),v=s;continue}for(p=[],N=[];i!==null&&i.k!==_;)(l||!(i.e.f&M))&&(d??(d=new Set)).add(i),N.push(i),i=i.next;if(i===null)continue;s=i}p.push(s),v=s,i=s.next}if(i!==null||d!==void 0){for(var E=d===void 0?[]:de(d);i!==null;)(l||!(i.e.f&M))&&E.push(i),i=i.next;var V=E.length;if(V>0){var ye=n&_e&&g===0?r:null;if(u){for(c=0;c<V;c+=1)(j=E[c].a)==null||j.measure();for(c=0;c<V;c+=1)($=E[c].a)==null||$.fix()}We(e,E,ye,m)}}u&&ke(()=>{var ee;if(I!==void 0)for(s of I)(ee=s.a)==null||ee.apply()}),ae.first=e.first&&e.first.e,ae.last=v&&v.e}function je(t,e,r,a){a&G&&te(t.v,e),a&J?te(t.i,r):t.i=r}function Ce(t,e,r,a,n,l,o,u,f){var g=(f&G)!==0,m=(f&Te)===0,S=g?m?we(n):re(n):n,i=f&J?re(o):o,d={i,v:S,k:l,a:null,e:null,prev:r,next:a};try{return d.e=me(()=>u(t,S,i),A),d.e.prev=r&&r.e,d.e.next=a&&a.e,r===null?e.first=d:(r.next=d,r.e.next=d.e),a!==null&&(a.prev=d,a.e.prev=d.e),d}finally{}}function ie(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,l=t.e.nodes_start;l!==a;){var o=Qe(l);n.before(l),l=o}}function b(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function $e(t){if(A){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;k(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var n=t.checked;k(t,"checked",null),t.checked=n}}};t.__on_r=r,He(r),Xe()}}function er(t,e){var r=t.__attributes??(t.__attributes={});r.value===(r.value=e)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e)}function k(t,e,r,a){var n=t.__attributes??(t.__attributes={});A&&(n[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||n[e]!==(n[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Ve]=r),r==null?t.removeAttribute(e):typeof r!="string"&&rr(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var se=new Map;function rr(t){var e=se.get(t.nodeName);if(e)return e;se.set(t.nodeName,e=[]);for(var r,a=le(t),n=Element.prototype;n!==a;){r=Fe(a);for(var l in r)r[l].set&&e.push(l);a=le(a)}return e}function tr(t,e,r,a){var n=t.__styles??(t.__styles={});n[e]!==r&&(n[e]=r,r==null?t.style.removeProperty(e):t.style.setProperty(e,r,""))}var ar=w("<option disabled selected></option>"),nr=w("<option> </option>"),lr=w("<label>Algorithm: <select><!><!></select></label>");function or(t,e){var r=lr(),a=U(T(r)),n=T(a);pe(n,()=>e.currentAlgorithmId===null,o=>{var u=ar();u.value=((u.__value="")==null,""),x(o,u)});var l=U(n);K(l,17,()=>Object.values(e.supportedAlgorithms),o=>o.id,(o,u)=>{var f=nr(),g={},m=T(f,!0);C(f),O(()=>{g!==(g=h(u).id)&&(f.value=(f.__value=h(u).id)==null?"":h(u).id),f.selected=e.currentAlgorithmId===h(u).id,he(m,h(u).name)}),x(o,f)}),C(a),C(r),O(()=>k(a,"name",e.parameterName)),x(t,r)}var ur=w('<label>Color count: <input type="number" min="1"></label>');function ir(t,e){var r=ur(),a=U(T(r));$e(a),C(r),O(()=>{k(a,"name",e.parameterName),er(a,e.currentColorCount??1)}),x(t,r)}var sr=w('<form><div><!> <!></div> <button type="submit">Apply</button></form>');function cr(t,e){D(e,!0);var r=sr(),a=T(r),n=T(a),l=Q(()=>{var f,g;return((g=(f=e.currentQuery)==null?void 0:f.algorithm)==null?void 0:g.id)??null});or(n,{get currentAlgorithmId(){return h(l)},get supportedAlgorithms(){return e.supportedAlgorithms},get parameterName(){return e.algorithmIdUrlSearchParameterName}});var o=U(n,2),u=Q(()=>{var f;return((f=e.currentQuery)==null?void 0:f.colorCount)??null});ir(o,{get currentColorCount(){return h(u)},get parameterName(){return e.colorCountUrlSearchParameterName}}),C(a),Be(2),C(r),x(t,r),q()}function fr(t,e){return`hsl(${Number(t%BigInt(e))*(360/e)}, 100%, 50%)`}var vr=w('<span class="cell svelte-1v5xkt0"> </span>');function dr(t,e){D(e,!0);const r=Q(()=>fr(e.cell,e.colorCount));var a=vr(),n=T(a,!0);C(a),O(()=>{tr(a,"background-color",h(r)),he(n,e.cell)}),x(t,a),q()}var mr=w('<div class="row svelte-1tt7hn9"></div>');function gr(t,e){var r=mr();K(r,21,()=>e.row,Ne,(a,n)=>{dr(a,{get cell(){return h(n)},get colorCount(){return e.colorCount}})}),C(r),x(t,r)}function _r(t,e){const r=e(t);return[...t,r]}function hr(t){let e=Ye(z([])),r=t;function a(){oe(e,z(_r(h(e),r)))}function n(){return setInterval(a,1e3)}let l=n();function o(u){r=u,oe(e,z([])),clearInterval(l),l=n()}return{changeComputeNextTriangleRow:o,get triangle(){return h(e)}}}var pr=w('<div class="triangle-displayer svelte-17nlpx9"><div class="triangle-displayer__content svelte-17nlpx9"></div></div>');function Nr(t,e){D(e,!0);const r=hr(e.computeNextTriangleRow);let a=e.computeNextTriangleRow;ze(()=>{a!==e.computeNextTriangleRow&&(r.changeComputeNextTriangleRow(e.computeNextTriangleRow),a=e.computeNextTriangleRow)});var n=pr(),l=T(n);K(l,21,()=>r.triangle,Ne,(o,u)=>{gr(o,{get row(){return h(u)},get colorCount(){return e.colorCount}})}),C(l),C(n),x(t,n),q()}var Cr=w("<main><!> <!></main>");function yr(t,e){D(e,!0);var r=Cr(),a=T(r);cr(a,{get currentQuery(){return e.query},get supportedAlgorithms(){return e.supportedAlgorithms},get colorCountUrlSearchParameterName(){return e.colorCountUrlSearchParameterName},get algorithmIdUrlSearchParameterName(){return e.algorithmIdUrlSearchParameterName}});var n=U(a,2);pe(n,()=>e.query!==null&&e.query.algorithm!==null&&e.query.colorCount!==null,l=>{Nr(l,{get computeNextTriangleRow(){return e.query.algorithm.computeNextTriangleRow},get colorCount(){return e.query.colorCount}})}),C(r),x(t,r),q()}function Ar(t,e){const r=t.getAll(e);if(r.length>1)return null;const[a]=r;if(typeof a>"u")return null;const n=Number(a);return Number.isNaN(n)?null:n}function xr(t,e){const r=t.getAll(e);if(r.length>1)return null;const[a]=r;return typeof a>"u"?null:a}function Tr(t,e,r){const a=xr(t,r);return a===null?null:e[a]??null}function wr(t,e,r,a){const n=Tr(t,a,e),l=Ar(t,r);return{algorithm:n,colorCount:l}}function Ir(t){const e=[];if(t.length===0)e.push(1n);else for(let r=0;r<=t[t.length-1].length;r+=1){const a=t[t.length-1][r-1]??0n,n=t[t.length-1][r]??0n;e.push(a+n)}return e}const ce={computeNextTriangleRow:Ir,id:"pascal",name:"Pascal's"};function Rr(t,e){if(e===0n||e===t)return 1n;let r=1n;for(let a=1n;a<=e;a+=1n)r*=t-a+1n;for(let a=1n;a<=e;a+=1n)r/=a;return r}function br(t){const e=[],r=BigInt(t.length)+1n;for(let a=1n;a<=r;a+=1n){let n=0n;for(let l=0n;l<=a;l+=1n)n+=(-1n)**l*Rr(a,l)*(a-l)**r;e.push(n)}return e}const fe={computeNextTriangleRow:br,id:"surjection-count",name:"Surjection count"},ve={[ce.id]:ce,[fe.id]:fe};function qr(t,e){D(e,!0);const r=Ge(),a=()=>Je(Ke,"$page",r),n="algorithm",l="color-count";function o(){return wr(a().url.searchParams,n,l,ve)}const u=Q(o);yr(t,{get query(){return h(u)},colorCountUrlSearchParameterName:l,algorithmIdUrlSearchParameterName:n,supportedAlgorithms:ve}),q()}export{qr as component};

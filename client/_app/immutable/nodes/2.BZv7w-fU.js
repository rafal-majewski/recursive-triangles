import{t as w,a as y}from"../chunks/disclose-version.gPFD8Ba8.js";import{b as xe,j as ye,a1 as de,a as me,ar as z,as as Te,a8 as we,s as re,at as G,h as x,au as te,av as M,u as ge,aw as Ie,a6 as Re,ax as be,d as Se,r as ae,Y as Ee,v as Pe,ay as _e,y as V,Q as Ue,P as De,w as qe,H as Le,x as ne,z as B,c as P,a3 as Me,az as Oe,$ as ke,ab as Fe,g as le,aA as He,aB as Qe,aC as Ve,p as D,L as O,l as p,J,M as T,e as q,O as C,ap as Be,m as oe,F as Ye,N as U,aD as ze}from"../chunks/runtime.PpVUs9l6.js";import{a as he,s as Ge,b as Je}from"../chunks/store.BIpUktQj.js";import{p as Ke}from"../chunks/stores.CweHDE2x.js";import{p as Y,i as pe}from"../chunks/if.A4QjoaoA.js";let ue=!1;function Xe(){ue||(ue=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Ne(t,e){return e}function We(t,e,r,a){for(var n=[],l=e.length,o=0;o<l;o++)Ie(e[o].e,n,!0);var u=l>0&&n.length===0&&r!==null;if(u){var m=r.parentNode;Re(m),m.append(r),a.clear(),b(t,e[0].prev,e[l-1].next)}be(n,()=>{for(var g=0;g<l;g++){var d=e[g];u||(a.delete(d.k),b(t,d.prev,d.next)),Se(d.e,!u)}})}function K(t,e,r,a,n,l=null){var o=t,u={items:new Map,first:null},m=(e&_e)!==0;if(m){var g=t;o=x?V(Ue(g)):g.appendChild(De())}x&&qe();var d=null,S=!1;xe(()=>{var i=r(),v=ye(i)?i:i==null?[]:de(i),f=v.length;if(S&&f===0)return;S=f===0;let I=!1;if(x){var h=o.data===Le;h!==(f===0)&&(o=ne(),V(o),B(!1),I=!0)}if(x){for(var N=null,A,_=0;_<f;_++){if(P.nodeType===8&&P.data===Me){o=P,I=!0,B(!1);break}var s=v[_],c=a(s,_);A=Ce(P,u,N,null,s,c,_,n,e),u.items.set(c,A),N=A}f>0&&V(ne())}if(!x){var F=Ee;Ze(v,u,o,n,e,(F.f&M)!==0,a)}l!==null&&(f===0?d?ge(d):d=me(()=>l(o)):d!==null&&Pe(d,()=>{d=null})),I&&B(!0),r()}),x&&(o=P)}function Ze(t,e,r,a,n,l,o){var W,Z,j,$;var u=(n&Oe)!==0,m=(n&(z|G))!==0,g=t.length,d=e.items,S=e.first,i=S,v,f=null,I,h=[],N=[],A,_,s,c;if(u)for(c=0;c<g;c+=1)A=t[c],_=o(A,c),s=d.get(_),s!==void 0&&((W=s.a)==null||W.measure(),(I??(I=new Set)).add(s));for(c=0;c<g;c+=1){if(A=t[c],_=o(A,c),s=d.get(_),s===void 0){var F=i?i.e.nodes_start:r;f=Ce(F,e,f,f===null?e.first:f.next,A,_,c,a,n),d.set(_,f),h=[],N=[],i=f.next;continue}if(m&&je(s,A,c,n),s.e.f&M&&(ge(s.e),u&&((Z=s.a)==null||Z.unfix(),(I??(I=new Set)).delete(s))),s!==i){if(v!==void 0&&v.has(s)){if(h.length<N.length){var L=N[0],R;f=L.prev;var X=h[0],H=h[h.length-1];for(R=0;R<h.length;R+=1)ie(h[R],L,r);for(R=0;R<N.length;R+=1)v.delete(N[R]);b(e,X.prev,H.next),b(e,f,X),b(e,H,L),i=L,f=H,c-=1,h=[],N=[]}else v.delete(s),ie(s,i,r),b(e,s.prev,s.next),b(e,s,f===null?e.first:f.next),b(e,f,s),f=s;continue}for(h=[],N=[];i!==null&&i.k!==_;)(l||!(i.e.f&M))&&(v??(v=new Set)).add(i),N.push(i),i=i.next;if(i===null)continue;s=i}h.push(s),f=s,i=s.next}if(i!==null||v!==void 0){for(var E=v===void 0?[]:de(v);i!==null;)(l||!(i.e.f&M))&&E.push(i),i=i.next;var Q=E.length;if(Q>0){var Ae=n&_e&&g===0?r:null;if(u){for(c=0;c<Q;c+=1)(j=E[c].a)==null||j.measure();for(c=0;c<Q;c+=1)($=E[c].a)==null||$.fix()}We(e,E,Ae,d)}}u&&Fe(()=>{var ee;if(I!==void 0)for(s of I)(ee=s.a)==null||ee.apply()}),ae.first=e.first&&e.first.e,ae.last=f&&f.e}function je(t,e,r,a){a&z&&te(t.v,e),a&G?te(t.i,r):t.i=r}function Ce(t,e,r,a,n,l,o,u,m){var g=(m&z)!==0,d=(m&Te)===0,S=g?d?we(n):re(n):n,i=m&G?re(o):o,v={i,v:S,k:l,a:null,e:null,prev:r,next:a};try{return v.e=me(()=>u(t,S,i),x),v.e.prev=r&&r.e,v.e.next=a&&a.e,r===null?e.first=v:(r.next=v,r.e.next=v.e),a!==null&&(a.prev=v,a.e.prev=v.e),v}finally{}}function ie(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,l=t.e.nodes_start;l!==a;){var o=ke(l);n.before(l),l=o}}function b(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function $e(t){if(x){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;k(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var n=t.checked;k(t,"checked",null),t.checked=n}}};t.__on_r=r,Qe(r),Xe()}}function er(t,e){var r=t.__attributes??(t.__attributes={});r.value===(r.value=e)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e)}function k(t,e,r,a){var n=t.__attributes??(t.__attributes={});x&&(n[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||n[e]!==(n[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Ve]=r),r==null?t.removeAttribute(e):typeof r!="string"&&rr(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var se=new Map;function rr(t){var e=se.get(t.nodeName);if(e)return e;se.set(t.nodeName,e=[]);for(var r,a=le(t),n=Element.prototype;n!==a;){r=He(a);for(var l in r)r[l].set&&e.push(l);a=le(a)}return e}function tr(t,e,r,a){var n=t.__styles??(t.__styles={});n[e]!==r&&(n[e]=r,r==null?t.style.removeProperty(e):t.style.setProperty(e,r,""))}function ar(t,e){const r=t.getAll(e);if(r.length>1)return null;const[a]=r;if(typeof a>"u")return null;const n=Number(a);return Number.isNaN(n)?null:n}function nr(t,e){const r=t.getAll(e);if(r.length>1)return null;const[a]=r;return typeof a>"u"?null:a}function lr(t,e,r){const a=nr(t,r);return a===null?null:e[a]??null}function or(t,e,r,a){const n=lr(t,a,e),l=ar(t,r);return{algorithm:n,colorCount:l}}function ur(t,e){return`hsl(${Number(t%BigInt(e))*(360/e)}, 100%, 50%)`}var ir=w('<span class="cell svelte-1v5xkt0"> </span>');function sr(t,e){D(e,!0);const r=J(()=>ur(e.cell,e.colorCount));var a=ir(),n=T(a,!0);C(a),O(()=>{tr(a,"background-color",p(r)),he(n,e.cell)}),y(t,a),q()}var cr=w('<div class="row svelte-1tt7hn9"></div>');function fr(t,e){var r=cr();K(r,21,()=>e.row,Ne,(a,n)=>{sr(a,{get cell(){return p(n)},get colorCount(){return e.colorCount}})}),C(r),y(t,r)}function vr(t,e){const r=e(t);return[...t,r]}function dr(t){let e=Be(Y([])),r=t;function a(){oe(e,Y(vr(p(e),r)))}function n(){return setInterval(a,1e3)}let l=n();function o(u){r=u,oe(e,Y([])),clearInterval(l),l=n()}return{get triangle(){return p(e)},changeComputeNextTriangleRow:o}}var mr=w('<div class="triangle-displayer svelte-17nlpx9"><div class="triangle-displayer__content svelte-17nlpx9"></div></div>');function gr(t,e){D(e,!0);const r=dr(e.computeNextTriangleRow);let a=e.computeNextTriangleRow;Ye(function(){a!==e.computeNextTriangleRow&&(r.changeComputeNextTriangleRow(e.computeNextTriangleRow),a=e.computeNextTriangleRow)});var n=mr(),l=T(n);K(l,21,()=>r.triangle,Ne,(o,u)=>{fr(o,{get row(){return p(u)},get colorCount(){return e.colorCount}})}),C(l),C(n),y(t,n),q()}var _r=w("<option disabled selected></option>"),hr=w("<option> </option>"),pr=w("<label>Algorithm: <select><!><!></select></label>");function Nr(t,e){var r=pr(),a=U(T(r)),n=T(a);pe(n,()=>e.currentAlgorithmId===null,o=>{var u=_r();u.value=((u.__value="")==null,""),y(o,u)});var l=U(n);K(l,17,()=>Object.values(e.supportedAlgorithms),o=>o.id,(o,u)=>{var m=hr(),g={},d=T(m,!0);C(m),O(()=>{g!==(g=p(u).id)&&(m.value=(m.__value=p(u).id)==null?"":p(u).id),m.selected=e.currentAlgorithmId===p(u).id,he(d,p(u).name)}),y(o,m)}),C(a),C(r),O(()=>k(a,"name",e.parameterName)),y(t,r)}var Cr=w('<label>Color count: <input type="number" min="1"></label>');function Ar(t,e){var r=Cr(),a=U(T(r));$e(a),C(r),O(()=>{k(a,"name",e.parameterName),er(a,e.currentColorCount??1)}),y(t,r)}var xr=w('<form><div><!> <!></div> <button type="submit">Apply</button></form>');function yr(t,e){D(e,!0);var r=xr(),a=T(r),n=T(a),l=J(()=>{var u;return((u=e.currentQuery.algorithm)==null?void 0:u.id)??null});Nr(n,{get currentAlgorithmId(){return p(l)},get supportedAlgorithms(){return e.supportedAlgorithms},get parameterName(){return e.algorithmIdUrlSearchParameterName}});var o=U(n,2);Ar(o,{get currentColorCount(){return e.currentQuery.colorCount},get parameterName(){return e.colorCountUrlSearchParameterName}}),C(a),ze(2),C(r),y(t,r),q()}var Tr=w("<main><!> <!></main>");function wr(t,e){D(e,!0);var r=Tr(),a=T(r);yr(a,{get currentQuery(){return e.query},get supportedAlgorithms(){return e.supportedAlgorithms},get colorCountUrlSearchParameterName(){return e.colorCountUrlSearchParameterName},get algorithmIdUrlSearchParameterName(){return e.algorithmIdUrlSearchParameterName}});var n=U(a,2);pe(n,()=>e.query.algorithm!==null&&e.query.colorCount!==null,l=>{gr(l,{get computeNextTriangleRow(){return e.query.algorithm.computeNextTriangleRow},get colorCount(){return e.query.colorCount}})}),C(r),y(t,r),q()}function Ir(t){const e=[];if(t.length===0)e.push(1n);else for(let r=0;r<=t[t.length-1].length;r+=1){const a=t[t.length-1][r-1]??0n,n=t[t.length-1][r]??0n;e.push(a+n)}return e}const ce={id:"pascal",name:"Pascal's",computeNextTriangleRow:Ir};function Rr(t,e){if(e===0n||e===t)return 1n;let r=1n;for(let a=1n;a<=e;a+=1n)r*=t-a+1n;for(let a=1n;a<=e;a+=1n)r/=a;return r}function br(t){const e=[],r=BigInt(t.length)+1n;for(let a=1n;a<=r;a+=1n){let n=0n;for(let l=0n;l<=a;l+=1n)n+=(-1n)**l*Rr(a,l)*(a-l)**r;e.push(n)}return e}const fe={id:"surjection-count",name:"Surjection count",computeNextTriangleRow:br},ve={[ce.id]:ce,[fe.id]:fe};function qr(t,e){D(e,!0);const r=Ge(),a=()=>Je(Ke,"$page",r),n="algorithm",l="color-count",o=J(()=>or(a().url.searchParams,n,l,ve));wr(t,{get query(){return p(o)},colorCountUrlSearchParameterName:l,algorithmIdUrlSearchParameterName:n,supportedAlgorithms:ve}),q()}export{qr as component};
